import test from 'ava'
import huffman from '../src/huffman'

test('encodes values correctly', t => {
  // http://httpwg.org/specs/rfc7541.html#request.examples.without.huffman.coding
  t.true(huffman('www.example.com') === '111100011110001111000010111001011111001000111010011010111010000010101011100100001111010011111111')
  t.true(huffman('no-cache') === '101010001110101100010000011001001001110010111111')
  t.true(huffman('custom-key') === '0010010110101000010010011110100101011011101010010111110101111111')
  t.true(huffman('custom-value') === '001001011010100001001001111010010101101110111000111010001011010010111111')

  // http://httpwg.org/specs/rfc7541.html#response.examples.with.huffman.coding
  t.true(huffman('302') === '0110010000000010')
  t.true(huffman('private') === '1010111011000011011101110001101001001011')
  t.true(huffman('Mon, 21 Oct 2013 20:13:21 GMT') === '11010000011110101011111010010100000100000101010011010100010001001010100000100000000001011001010100000100000010111000000101100110111000001000001010100110001011010001101111111111')
  t.true(huffman('https://www.example.com') === '1001110100101001101011010001011100011000011000111100011110001111000010111001011111001000111010011010111010000010101011100100001111010011')
  t.true(huffman('foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age=3600; version=1') === '100101001110011110000010000111011101011111110010111001101100011110110011001101011101111111011111110011010101101100111001011000001101010110101111001001110000100001111111001101100111001011000001101010110010011100001111101101010010100100011111100101011000011100110001011000000110010111000000000000111110110101001110111001011011000100000110001111010101000000000111')
})